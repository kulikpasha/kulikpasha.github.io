(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function r(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerpolicy&&(l.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?l.credentials="include":n.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function t(n){if(n.ep)return;n.ep=!0;const l=r(n);fetch(n.href,l)}})();function c(i,e,r){if(i.field[e][r].p===1){if(i.field[e][r].t==="K")return'<img src="/pic/Wking.png">';if(i.field[e][r].t==="R")return'<img src="/pic/Wrook.png">';if(i.field[e][r].t==="B")return'<img src="/pic/Wbishop.png">';if(i.field[e][r].t==="H")return'<img src="/pic/Whorse.png">';if(i.field[e][r].t==="P")return'<img src="/pic/Wpawn.png">';if(i.field[e][r].t==="Q")return'<img src="/pic/Wqueen.png">'}else if(i.field[e][r].p===-1){if(i.field[e][r].t==="K")return'<img src="/pic/Bking.png">';if(i.field[e][r].t==="R")return'<img src="/pic/Brook.png">';if(i.field[e][r].t==="B")return'<img src="/pic/Bbishop.png">';if(i.field[e][r].t==="H")return'<img src="/pic/Bhorse.png">';if(i.field[e][r].t==="P")return'<img src="/pic/Bpawn.png">';if(i.field[e][r].t==="Q")return'<img src="/pic/Bqueen.png">'}else return"&nbsp;"}const d=document.createElement("table");d.cellPadding=0;d.cellSpacing=0;const o=new WebSocket("ws://localhost:3000");o.addEventListener("open",f);o.addEventListener("message",a);function f(i){const e=prompt("Please enter room id");u(e)}function p(i,e){o.send(JSON.stringify({type:"next-turn",payload:{i,j:e}}))}function u(i){o.send(JSON.stringify({type:"open-room",payload:{roomId:i}}))}function a(i){const e=JSON.parse(i.data);e.type==="next-state"&&(d.innerHTML="",m(e.payload.state))}function m(i){for(let e=0;e<8;e++){const r=document.createElement("tr");for(let t=0;t<8;t++){const n=document.createElement("td");e%2!=t%2&&i.field[e][t].h==0?n.classList.add("black"):e%2!=t%2&&(i.field[e][t].h==1||i.field[e][t].h==10)&&n.classList.add("hoveredblack"),e%2==t%2&&(i.field[e][t].h==1||i.field[e][t].h==10)&&n.classList.add("hoveredwhite"),i.field[e][t].h==2&&n.classList.add("clicked"),i.field[e][t].h==3&&n.classList.add("attack"),i.field[e][t].h==4&&n.classList.add("castles"),n.innerHTML=c(i,e,t),i.field[e][t].p==1&&n.classList.add("playerWhite"),i.field[e][t].p==-1&&n.classList.add("playerBlack"),n.onclick=()=>{p(e,t)},r.appendChild(n)}d.appendChild(r)}document.body.appendChild(d),window.innerWidth>=window.innerHeight?(d.style.width=document.documentElement.clientHeight,d.style.height=document.documentElement.clientHeight):window.innerHeight>window.innerWidth&&(d.style.width=document.documentElement.clientWidth,d.style.height=document.documentElement.clientWidth)}
